{% extends "base.html" %}
{% block title %}Cart - The Anime Store{% endblock %}

{% block content %}
<div class="container cart-page">
    <h1>Your Cart</h1>

    {% if cart_items %}
    <div class="cart-items">
        <h3>  Cart Items</h3>
        {% for item in cart_items %}
<div class="cart-item d-flex align-items-center mb-3">
    <!-- Product Image -->
    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="cart-item-image">

    <!-- Product Details -->
    <div class="cart-item-details flex-grow-1 ms-3">
        <h5 class="mb-1">{{ item.product.name }}</h5>
        <p class="mb-0">{{ currency }} {{ item.product.price }} Ã— {{ item.quantity }}</p>
        <p class="mb-0"><strong>Sub-total:</strong> {{ currency }} {{ item.subtotal|floatformat:2 }}</p>
    </div>

    <!-- Actions -->
    <div class="cart-item-actions text-end">
        <form action="{% url 'decrease_item' item.product.id %}" method="post" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning btn-sm">Decrease</button>
        </form>
        <form action="{% url 'remove_item' item.product.id %}" method="post" class="d-inline">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm">Remove</button>
        </form>
    </div>
</div>
{% endfor %}

    </div>

    <div class="cart-summary">
        <div class="total">Total: {{currency}} {{ total|floatformat:2 }}</div>
        <a href="{% url 'checkout' %}" class="btn btn-primary btn-large">Proceed to Checkout</a>
    </div>
    {% else %}
    <div class="empty-cart">
        <h2>Your cart is empty</h2>
        <a href="{% url 'product' %}" class="btn btn-primary">Start Shopping</a>
    </div>
    {% endif %}
</div>
{% endblock %}
